<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<!-- BEGIN CONTENT -->
	<div class="app-content content">
		<div class="content-body">
			<section class="row">
				<div class="col-12">
					<div class="card">
						<div class="card-header">
							<h4 class="card-title" th:text="${customer?.id != null ? 'Chỉnh Sửa Khách Hàng' : 'Thêm Khách Hàng Mới'}"></h4>
						</div>
						<div class="card-content">
							<div class="card-body">
								<form id="updateCustomerForm" th:action="@{/customer/newedit-customer}" method="post">
									<input type="hidden" id="customer_id" name="id" th:value="${customer?.id}"> <!-- Giá trị này có thể là ID của khách hàng hiện tại -->
									<div class="form-group">
										<label for="company_name">Tên Công Ty:</label>
										<input type="text" class="form-control" id="company_name" name="company_name"
										   th:value="${customer?.companyName}" required>
									</div>

									<div class="form-group">
										<label for="contact_person">Người Liên Hệ Chính:</label>
										<input type="text" class="form-control" id="contact_person" name="contact_person"
										   th:value="${customer?.contactPerson}" required>
									</div>

									<div class="form-group">
										<label for="email">Email:</label>
										<input type="email" class="form-control" id="email" name="email"
										   th:value="${customer?.email}" required>
									</div>

									<div class="form-group">
										<label for="phone">Số Điện Thoại:</label>
										<input type="tel" class="form-control" id="phone" name="phone"
										   th:value="${customer?.phone}" required>
									</div>

									<div class="form-group">
										<label for="address">Địa Chỉ:</label>
										<input type="text" class="form-control" id="address" name="address"
										   th:value="${customer?.address}" required>
									</div>

									<div class="form-group">
										<label for="profession">Ngành Nghề:</label>
										<select class="form-control" id="profession" name="profession" required>
											<option value="">Chọn Ngành Nghề</option>
											<th:block th:each="profession : ${professions}">
												<option th:value="${profession.id}"
													th:text="${profession.name}"
													th:selected="${profession.id == customer?.profession?.id}"></option>
											</th:block>
										</select>
									</div>

									<div class="form-group">
										<label for="main_status">Trạng Thái Chính:</label>
										<select class="form-control" id="main_status" name="main_status" required>
											<option value="">Chọn Trạng Thái Chính</option>
											<th:block th:each="status : ${statuses}">
												<option th:value="${status.id}"
													th:text="${status.name}"
													th:selected="${status.id == customer?.mainStatus?.id}"></option>
											</th:block>
										</select>
									</div>

									<div class="form-group">
										<label for="sub_status">Trạng Thái Phụ:</label>
										<select class="form-control" id="sub_status" name="sub_status" required>
											<option value="">Chọn Trạng Thái Phụ</option>
											<th:block th:each="status : ${statuses}">
												<option th:value="${status.id}"
													th:text="${status.name}"
													th:selected="${status.id == customer?.subStatus?.id}"></option>
											</th:block>
										</select>
									</div>

									<div class="form-group">
										<label for="responsible_person">Người Phụ Trách:</label>
										<select class="form-control" id="responsible_person" name="responsible_person" required>
											<option value="">Chọn Người Phụ Trách</option>
											<th:block th:each="person : ${responsiblePersons}">
												<option th:value="${person.id}"
													th:text="${person.name}"
													th:selected="${person.id == customer?.responsiblePerson?.id}"></option>
											</th:block>
										</select>
									</div>

									<div class="form-group">
										<label for="note">Ghi Chú:</label>
										<textarea class="form-control" id="note" name="note" th:text="${customer?.note}"></textarea>
									</div>

									<button type="submit" class="btn btn-primary">Lưu Khách Hàng</button>
									<a th:href = "@{/customer/list}">
										<button type="button" class="btn btn-secondary">Quay Lại</button>
									</a>
								</form>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>
	<script>
	  document.querySelectorAll("input[required], select[required]").forEach((input) => {
	    const label = input.previousElementSibling;
	    if (label) {
	      label.innerHTML += ' <span style="color: red;">*</span>';
	    }
	  });
	</script>
	<!-- END CONTENT -->
</html>
