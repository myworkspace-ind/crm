<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<!-- START COMMON META AND TITLE -->
<th:block th:include="fragments/common_meta_title"></th:block>
<!-- END COMMON META AND TITLE -->

<!-- START COMMON CSS -->
<th:block th:include="fragments/common_css"></th:block>
<!-- END COMMON CSS -->

<link rel="stylesheet" type="text/css" href="resources/css/new_style.css">
<link rel="stylesheet" type="text/css" href="resources/css/status.css">
<link rel="stylesheet" type="text/css" href="resources/css/buttonGroupFunction.css">
</head>

<body
	class="vertical-layout vertical-compact-menu 2-columns menu-expanded fixed-navbar"
	data-open="click" data-menu="vertical-compact-menu"
	data-col="2-columns">

	<!-- BEGIN HEADER  -->
	<th:block th:include="fragments/headerCRM"></th:block>
	<!-- END HEADER  -->

	<!-- BEGIN LEFT MENU NAVIGATION -->
	<th:block th:include="fragments/leftNavCRM"></th:block>
	<!-- END LEFT MENU NAVIGATION -->

	<!--  BEGIN CONTENT -->
	<div class="app-content content">

		<!-- BEGIN CONTENT WRAPPER -->
		<th:block th:include="fragments/contentWrapperCRM"></th:block>
		<!-- END CONTENT WRAPPER -->

		<div class="content-body">
			<section class="row">
				<div class="col-12">
					<div class="card">
						<div class="card-header">
							<h4 class="card-title">Danh sách khách hàng</h4>
							<a class="heading-elements-toggle"><i
								class="ft-ellipsis-h font-medium-3"></i></a>
							<div class="heading-elements">
								
								<!--<a href="/crm-web/add-customer"> -->
								<button class="btn btn-primary btn-sm" data-toggle="modal"
									data-target="#addNewCustomerModal">
									<i class="fa-solid fa-plus"></i> Thêm mới khách hàng
								</button>
								<!--</a> -->

								<a class="btn btn-primary btn-sm" 
								th:href="@{/customer-management}">
									<i class="fa-solid fa-plus"></i> Thêm nhanh khách hàng
								</a>

							</div>
						</div>

						<!-- Modal cho Thêm Khách Hàng Mới -->
						<div class="modal fade" id="addNewCustomerModal" tabindex="-1"
							role="dialog" aria-labelledby="addNewCustomerModalLabel"
							aria-hidden="true">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="addNewCustomerModalLabel">Thêm
											Khách Hàng Mới</h5>
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										<form id="addNewCustomerForm">
											<div id="errorMessage" class="alert alert-danger"
												style="display: none;"></div>
											<div class="form-group">
												<label for="name">Tên:</label> <input type="text"
													class="form-control" id="name" name="name">
											</div>
											<div class="form-group">
												<label for="address">Địa chỉ:</label> <input type="text"
													class="form-control" id="address" name="address">
											</div>
											<div class="form-group">

												<label for="phone">Số điện thoại:</label> <input
													style="display: block !important;" type="text"
													class="form-control" id="phone" name="phone">
											</div>
											<button type="submit" class="btn btn-primary">Lưu
												Khách Hàng</button>
										</form>
									</div>
								</div>
							</div>
						</div>

						<!-- BEGIN STATUS OF CUSTOMER -->
						<th:block th:include="fragments/statusOfCustomer"></th:block>
						<!-- END STATUS OF CUSTOMER -->



						<div class="card-content">
							<div class="card-body">
								<!-- Task List table -->
								<div class="table-responsive">
									<div id="project-task-list_wrapper"
										class="dataTables_wrapper dt-bootstrap4">
										<div class="row">
											<div class="col-sm-12 col-md-6">
												<div class="dataTables_length" id="project-task-list_length">
													<label>Show <select name="project-task-list_length"
														aria-controls="project-task-list"
														class="custom-select custom-select-sm form-control form-control-sm select2-hidden-accessible"
														data-select2-id="1" tabindex="-1" aria-hidden="true">
															<option value="10" data-select2-id="3">10</option>
															<option value="25">25</option>
															<option value="50">50</option>
															<option value="100">100</option>
													</select> <span
														class="select2 select2-container select2-container--default"
														dir="ltr" data-select2-id="2" style="width: 55.5px;"><span
															class="selection"><span
																class="select2-selection select2-selection--single"
																role="combobox" aria-haspopup="true"
																aria-expanded="false" tabindex="0"
																aria-labelledby="select2-project-task-list_length-2t-container"><span
																	class="select2-selection__rendered"
																	id="select2-project-task-list_length-2t-container"
																	role="textbox" aria-readonly="true" title="10">10</span><span
																	class="select2-selection__arrow" role="presentation"><b
																		role="presentation"></b></span></span></span><span class="dropdown-wrapper"
															aria-hidden="true"></span></span> entries
													</label>
												</div>
											</div>
											<div class="col-sm-12 col-md-6"></div>
										</div>

										<!-- BEGIN CONTENT WRAPPER -->
										<th:block th:include="fragments/buttonGroupFunction"></th:block>
										<!-- END CONTENT WRAPPER -->


										<!-- BEGIN BẢNG DANH SÁCH KHÁCH HÀNG VÀ BỘ LỌC -->
										<div class="container-flex">
											<div class="filter-container">
												<button id="filter-toggle">
													<i class="fa-solid fa-filter"></i>
												</button>

												<!-- Khung lọc liên hệ theo, ban đầu ẩn -->
												<div id="filter-box" class="filter-hidden">
													<span>Lọc liên hệ theo</span>
													<div class="input-with-icon">
														<input class="form-control" id="iconLeft" type="text"
															placeholder="Tìm kiếm..." fdprocessedid="66aqzo">

														<div class="icon-container">
															<i class="fa fa-search"></i>
														</div>
													</div>
													<!-- <input type="text" placeholder="Tìm kiếm..."> -->
													<form>
														<label> <input type="checkbox"
															id="filter-option-1" data-target="#responsible-select">
															Người phụ trách
														</label> <select id="responsible-select" class="hidden-select">
															<option value="">Chọn người phụ trách</option>
															<option value="1">Lê Ngọc Thạch</option>
															<option value="2">Nguyễn Hoàng Phương Ngân</option>
															<option value="3">Nguyễn Thế Thành</option>
														</select> <label> <input type="checkbox"
															id="filter-option-2"
															data-target="#company-name, #company-address">
															Thông tin công ty
														</label> <input id="company-name" class="hidden-select"
															type="text" placeholder="Tìm kiếm tên công ty"> <input
															id="company-address" class="hidden-select" type="text"
															placeholder="Tìm kiếm địa chỉ công ty"> <label>
															<input type="checkbox" id="filter-option-3"
															data-target="#representative-name"> Tên người đại
															diện
														</label> <input id="representative-name" class="hidden-select"
															type="text" placeholder="Tìm kiếm tên người đại diện">

														<label> <input type="checkbox"
															id="filter-option-4" data-target="#email"> Email
															công ty
														</label> <input id="email" class="hidden-select" type="text"
															placeholder="Tìm kiếm email công ty"> <label>
															<input type="checkbox" id="filter-option-5"
															data-target="phone"> Điện thoại
														</label> <input id="phone" class="hidden-select" type="text"
															placeholder="Tìm kiếm SĐT công ty"> <label>
															<input type="checkbox" id="filter-option-6"
															data-target="status"> Trạng thái
														</label> <select id="main-status-select" class="hidden-select">
															<option value="">Chọn trạng thái</option>
															<option value="1">MỚI</option>
															<option value="2">CHƯA BẮT ĐẦU</option>
															<option value="3">HOÃN LẠI</option>
															<option value="4">ĐANG TRONG TIẾN TRÌNH</option>
															<option value="5">HOÀN THÀNH</option>
															<option value="6">HỦY</option>
															<option value="7">CHỐT</option>

														</select> <label> <input type="checkbox"
															id="filter-option-7" data-target="time"> Thời
															gian
														</label>
														<div id="time-filters" class="hidden-select">
															<span>Thời gian đăng ký</span> <input type="date"
																id="register-time" placeholder="Thời gian đăng ký">

															<span>Thời gian chốt</span> <input type="date"
																id="finalized-time" placeholder="Thời gian chốt">

															<span>Thời gian hủy</span> <input type="date"
																id="cancel-time" placeholder="Thời gian hủy"> <span>Thời
																gian hoàn thành</span> <input type="date" id="complete-time"
																placeholder="Thời gian hoàn thành">
														</div>
														<button>Áp dụng lọc</button>
														<button>Xóa bỏ</button>
													</form>
												</div>
											</div>

											<!-- BEGIN TABLE CUSTOMER LIST -->
											<div class="table-container">
												<div class="table-responsive">
													<table id="table" class="table table-bordered">
														<thead>
															<tr>
																<th style="width: 2%" data-field="select" class="th1">
																	<input type="checkbox" id="select-all"
																	class="d-flex align-items-center justify-content-center" />
																</th>
																<th data-field="number" class="th2">STT</th>
																<th data-field="company_name" class="th3">Tên công
																	ty</th>
																<th data-field="contact_person" class="th4">Người
																	liên hệ chính</th>
																<th data-field="email" class="th5">Email</th>
																<th data-field="phone" class="th6">Số điện thoại</th>
																<th data-field="address" class="th7">Địa chỉ khách
																	hàng</th>
																<th data-field="profession" class="th8">Ngành nghề</th>
																<th data-field="main_status" class="th9">Trạng thái
																	chính</th>
																<th data-field="sub_status" class="th10">Trạng thái
																	phụ</th>
																<th data-field="responsible_person" class="th11">Người
																	phụ trách</th>
																<th data-field="created_at" class="th12">Thời gian
																	tạo</th>
																<th data-field="note" class="th13">Ghi chú</th>
															</tr>
														</thead>
														<tbody>
															<tr th:each="customer, iterStat : ${customers}">
																<td class="th1"><input type="checkbox"
																	name="customer" th:value="${customer.id}"
																	class="customer-checkbox" /></td>
																<td th:text="${iterStat.index + 1}"></td>
																<td><a
																	th:href="@{customerDetail(id=${customer.id})}"
																	th:text="${customer.companyName}"></a></td>
																<td th:text="${customer.contactPerson}"></td>
																<td th:text="${customer.email}"></td>
																<td th:text="${customer.phone}"></td>
																<td th:text="${customer.address}"></td>
																<td th:text="${customer.profession}"></td>
																<td th:class="'status-cell main-status'" th:style="'background-color: ' + ${customer.mainStatus.backgroundColor} + '; color: white; text-align: center; vertical-align: middle;'">
																	<span th:text="${customer.mainStatus.name}"></span>
																</td>
																<td th:class="'status-cell sub-status'" th:style="'background-color: ' + ${customer.subStatus.backgroundColor} + '; color: white; text-align: center; vertical-align: middle;'">
																	<span th:text="${customer.subStatus.name}"></span>
																</td>
																<td th:text="${customer.responsiblePerson}"></td>

																<td
																	th:text="${#dates.format(customer.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
																<td th:text="${customer.note}"></td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
											<!-- END TABLE CUSTOMER LIST -->



										</div>

										<!-- END BẢNG DANH SÁCH KHÁCH HÀNG VÀ BỘ LỌC -->

										<div class="row">
											<div class="col-sm-12"></div>
										</div>
										<div class="row">
											<div class="col-sm-12 col-md-5">
												<div class="dataTables_info" id="project-task-list_info"
													role="status" aria-live="polite">Showing 1 to 10 of
													28 entries</div>
											</div>
											<div class="col-sm-12 col-md-7">
												<div class="dataTables_paginate paging_simple_numbers"
													id="project-task-list_paginate">
													<ul class="pagination">
														<li class="paginate_button page-item previous disabled"
															id="project-task-list_previous"><a href="#"
															aria-controls="project-task-list" data-dt-idx="0"
															tabindex="0" class="page-link">Previous</a></li>
														<li class="paginate_button page-item active"><a
															href="#" aria-controls="project-task-list"
															data-dt-idx="1" tabindex="0" class="page-link">1</a></li>
														<li class="paginate_button page-item "><a href="#"
															aria-controls="project-task-list" data-dt-idx="2"
															tabindex="0" class="page-link">2</a></li>
														<li class="paginate_button page-item "><a href="#"
															aria-controls="project-task-list" data-dt-idx="3"
															tabindex="0" class="page-link">3</a></li>
														<li class="paginate_button page-item next"
															id="project-task-list_next"><a href="#"
															aria-controls="project-task-list" data-dt-idx="4"
															tabindex="0" class="page-link">Next</a></li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
								<!--/ Task List table -->
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>

	<!-- END CONTENT -->

	<!-- START CUSTOMIZE BUTTON -->
	<th:block th:include="fragments/customizeButton"></th:block>
	<!-- END CUSTOMIZE BUTTON -->

	<!-- START COMMON JAVASCRIPT -->
	<th:block th:include="fragments/common_javascript"></th:block>
	<!-- END COMMON JAVASCRIPT -->

	<!-- PHẦN CHỈNH SỬA KHI HỆ THỐNG ASSETS TRÊN INTERNET BỊ LỖI -->
	<!-- FILE JS BỔ SUNG -->
	<script type="text/javascript"
		src="resources/app-assets/js/update/navigate.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/status.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/search.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/fetchCustomersByStatus.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/customerList_JS.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/toggleCheckboxActions.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/addCustomer.js"></script>
	<script type="text/javascript"
		src="resources/app-assets/js/update/buttonGroupFunction.js"></script>

</body>
</html>


